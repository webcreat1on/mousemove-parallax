(function(c,a,g){var d="Parallax";var f=30;var b={relativeInput:false,clipRelativeInput:false,calibrationThreshold:100,calibrationDelay:500,supportDelay:500,calibrateX:false,calibrateY:true,invertX:true,invertY:true,limitX:false,limitY:false,scalarX:10,scalarY:10,frictionX:0.1,frictionY:0.1,originX:0.5,originY:0.5,pointerEvents:true,precision:1};function e(j,h){this.element=j;this.layers=j.getElementsByClassName("layer");var k={calibrateX:this.data(this.element,"calibrate-x"),calibrateY:this.data(this.element,"calibrate-y"),invertX:this.data(this.element,"invert-x"),invertY:this.data(this.element,"invert-y"),limitX:this.data(this.element,"limit-x"),limitY:this.data(this.element,"limit-y"),scalarX:this.data(this.element,"scalar-x"),scalarY:this.data(this.element,"scalar-y"),frictionX:this.data(this.element,"friction-x"),frictionY:this.data(this.element,"friction-y"),originX:this.data(this.element,"origin-x"),originY:this.data(this.element,"origin-y"),pointerEvents:this.data(this.element,"pointer-events"),precision:this.data(this.element,"precision")};for(var i in k){if(k[i]===null){delete k[i]}}this.extend(this,b,h,k);this.calibrationTimer=null;this.calibrationFlag=true;this.enabled=false;this.depthsX=[];this.depthsY=[];this.raf=null;this.bounds=null;this.ex=0;this.ey=0;this.ew=0;this.eh=0;this.ecx=0;this.ecy=0;this.erx=0;this.ery=0;this.cx=0;this.cy=0;this.ix=0;this.iy=0;this.mx=0;this.my=0;this.vx=0;this.vy=0;this.onMouseMove=this.onMouseMove.bind(this);this.onDeviceOrientation=this.onDeviceOrientation.bind(this);this.onOrientationTimer=this.onOrientationTimer.bind(this);this.onCalibrationTimer=this.onCalibrationTimer.bind(this);this.onAnimationFrame=this.onAnimationFrame.bind(this);this.onWindowResize=this.onWindowResize.bind(this);this.initialise()}e.prototype.extend=function(){if(arguments.length>1){var n=arguments[0];for(var m=1,h=arguments.length;m<h;m++){var j=arguments[m];for(var k in j){n[k]=j[k]}}}};e.prototype.data=function(i,h){return this.deserialize(i.getAttribute("data-"+h))};e.prototype.deserialize=function(h){if(h==="true"){return true}else{if(h==="false"){return false}else{if(h==="null"){return null}else{if(!isNaN(parseFloat(h))&&isFinite(h)){return parseFloat(h)}else{return h}}}}};e.prototype.camelCase=function(h){return h.replace(/-+(.)?/g,function(i,j){return j?j.toUpperCase():""})};e.prototype.transformSupport=function(v){var o=a.createElement("div");var s=false;var n=null;var r=false;var t=null;var j=null;for(var p=0,m=this.vendors.length;p<m;p++){if(this.vendors[p]!==null){t=this.vendors[p][0]+"transform";j=this.vendors[p][1]+"Transform"}else{t="transform";j="transform"}if(o.style[j]!==g){s=true;break}}switch(v){case"2D":r=s;break;case"3D":if(s){var q=a.body||a.createElement("body");var u=a.documentElement;var k=u.style.overflow;var h=false;if(!a.body){h=true;u.style.overflow="hidden";u.appendChild(q);q.style.overflow="hidden";q.style.background=""}q.appendChild(o);o.style[j]="translate3d(1px,1px,1px)";n=c.getComputedStyle(o).getPropertyValue(t);r=n!==g&&n.length>0&&n!=="none";u.style.overflow=k;q.removeChild(o);if(h){q.removeAttribute("style");q.parentNode.removeChild(q)}}break}return r};e.prototype.ww=null;e.prototype.wh=null;e.prototype.wcx=null;e.prototype.wcy=null;e.prototype.wrx=null;e.prototype.wry=null;e.prototype.portrait=null;e.prototype.desktop=!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i);e.prototype.vendors=[null,["-webkit-","webkit"],["-moz-","Moz"],["-o-","O"],["-ms-","ms"]];e.prototype.motionSupport=!!c.DeviceMotionEvent;e.prototype.orientationSupport=!!c.DeviceOrientationEvent;e.prototype.orientationStatus=0;e.prototype.motionStatus=0;e.prototype.propertyCache={};e.prototype.initialise=function(){if(e.prototype.transform2DSupport===g){e.prototype.transform2DSupport=e.prototype.transformSupport("2D");e.prototype.transform3DSupport=e.prototype.transformSupport("3D")}if(this.transform3DSupport){this.accelerate(this.element)}var h=c.getComputedStyle(this.element);if(h.getPropertyValue("position")==="static"){this.element.style.position="relative"}if(!this.pointerEvents){this.element.style.pointerEvents="none"}this.updateLayers();this.updateDimensions();this.enable();this.queueCalibration(this.calibrationDelay)};e.prototype.updateLayers=function(){this.layers=this.element.getElementsByClassName("layer");this.depthsX=[];this.depthsY=[];for(var k=0,h=this.layers.length;k<h;k++){var j=this.layers[k];if(this.transform3DSupport){this.accelerate(j)}j.style.position=k?"absolute":"relative";j.style.display="block";j.style.left=0;j.style.top=0;var m=this.data(j,"depth")||0;this.depthsX.push(this.data(j,"depth-x")||m);this.depthsY.push(this.data(j,"depth-y")||m)}};e.prototype.updateDimensions=function(){this.ww=c.innerWidth;this.wh=c.innerHeight;this.wcx=this.ww*this.originX;this.wcy=this.wh*this.originY;this.wrx=Math.max(this.wcx,this.ww-this.wcx);this.wry=Math.max(this.wcy,this.wh-this.wcy)};e.prototype.updateBounds=function(){this.bounds=this.element.getBoundingClientRect();this.ex=this.bounds.left;this.ey=this.bounds.top;this.ew=this.bounds.width;this.eh=this.bounds.height;this.ecx=this.ew*this.originX;this.ecy=this.eh*this.originY;this.erx=Math.max(this.ecx,this.ew-this.ecx);this.ery=Math.max(this.ecy,this.eh-this.ecy)};e.prototype.queueCalibration=function(h){clearTimeout(this.calibrationTimer);this.calibrationTimer=setTimeout(this.onCalibrationTimer,h)};e.prototype.enable=function(){if(!this.enabled){this.enabled=true;if(!this.desktop&&this.orientationSupport){this.portrait=null;c.addEventListener("deviceorientation",this.onDeviceOrientation);setTimeout(this.onOrientationTimer,this.supportDelay)}else{if(!this.desktop&&this.motionSupport){this.portrait=null;c.addEventListener("devicemotion",this.onDeviceMotion);setTimeout(this.onMotionTimer,this.supportDelay)}else{this.cx=0;this.cy=0;this.portrait=false;c.addEventListener("mousemove",this.onMouseMove)}}c.addEventListener("resize",this.onWindowResize);this.raf=requestAnimationFrame(this.onAnimationFrame)}};e.prototype.disable=function(){if(this.enabled){this.enabled=false;if(this.orientationSupport){c.removeEventListener("deviceorientation",this.onDeviceOrientation)}else{if(this.motionSupport){c.removeEventListener("devicemotion",this.onDeviceMotion)}else{c.removeEventListener("mousemove",this.onMouseMove)}}c.removeEventListener("resize",this.onWindowResize);cancelAnimationFrame(this.raf)}};e.prototype.calibrate=function(h,i){this.calibrateX=h===g?this.calibrateX:h;this.calibrateY=i===g?this.calibrateY:i};e.prototype.invert=function(h,i){this.invertX=h===g?this.invertX:h;this.invertY=i===g?this.invertY:i};e.prototype.friction=function(h,i){this.frictionX=h===g?this.frictionX:h;this.frictionY=i===g?this.frictionY:i};e.prototype.scalar=function(h,i){this.scalarX=h===g?this.scalarX:h;this.scalarY=i===g?this.scalarY:i};e.prototype.limit=function(h,i){this.limitX=h===g?this.limitX:h;this.limitY=i===g?this.limitY:i};e.prototype.origin=function(h,i){this.originX=h===g?this.originX:h;this.originY=i===g?this.originY:i};e.prototype.clamp=function(j,i,h){j=Math.max(j,i);j=Math.min(j,h);return j};e.prototype.css=function(k,o,n){var m=this.propertyCache[o];if(!m){for(var j=0,h=this.vendors.length;j<h;j++){if(this.vendors[j]!==null){m=this.camelCase(this.vendors[j][1]+"-"+o)}else{m=o}if(k.style[m]!==g){this.propertyCache[o]=m;break}}}k.style[m]=n};e.prototype.accelerate=function(h){this.css(h,"transform","translate3d(0,0,0) rotate(0.0001deg)");this.css(h,"transform-style","preserve-3d");this.css(h,"backface-visibility","hidden")};e.prototype.setPosition=function(i,h,j){h=h.toFixed(this.precision)+"px";j=j.toFixed(this.precision)+"px";if(this.transform3DSupport){this.css(i,"transform","translate3d("+h+","+j+",0)")}else{if(this.transform2DSupport){this.css(i,"transform","translate("+h+","+j+")")}else{i.style.left=h;i.style.top=j}}};e.prototype.onOrientationTimer=function(){if(this.orientationSupport&&this.orientationStatus===0){this.disable();this.orientationSupport=false;this.enable()}};e.prototype.onMotionTimer=function(){if(this.motionSupport&&this.motionStatus===0){this.disable();this.motionSupport=false;this.enable()}};e.prototype.onCalibrationTimer=function(){this.calibrationFlag=true};e.prototype.onWindowResize=function(){this.updateDimensions()};e.prototype.onAnimationFrame=function(){this.updateBounds();var r=this.ix-this.cx;var q=this.iy-this.cy;if((Math.abs(r)>this.calibrationThreshold)||(Math.abs(q)>this.calibrationThreshold)){this.queueCalibration(0)}if(this.portrait){this.mx=this.calibrateX?q:this.iy;this.my=this.calibrateY?r:this.ix}else{this.mx=this.calibrateX?r:this.ix;this.my=this.calibrateY?q:this.iy}this.mx*=this.ew*(this.scalarX/100);this.my*=this.eh*(this.scalarY/100);if(!isNaN(parseFloat(this.limitX))){this.mx=this.clamp(this.mx,-this.limitX,this.limitX)}if(!isNaN(parseFloat(this.limitY))){this.my=this.clamp(this.my,-this.limitY,this.limitY)}this.vx+=(this.mx-this.vx)*this.frictionX;this.vy+=(this.my-this.vy)*this.frictionY;for(var k=0,j=this.layers.length;k<j;k++){var m=this.layers[k];var p=this.depthsX[k];var o=this.depthsY[k];var n=this.vx*(p*(this.invertX?-1:1));var h=this.vy*(o*(this.invertY?-1:1));this.setPosition(m,n,h)}this.raf=requestAnimationFrame(this.onAnimationFrame)};e.prototype.rotate=function(j,i){var h=(event.beta||0)/f;var l=(event.gamma||0)/f;var k=this.wh>this.ww;if(this.portrait!==k){this.portrait=k;this.calibrationFlag=true}if(this.calibrationFlag){this.calibrationFlag=false;this.cx=h;this.cy=l}this.ix=h;this.iy=l};e.prototype.onDeviceOrientation=function(i){var j=i.beta;var h=i.gamma;if(!this.desktop&&j!==null&&h!==null){this.orientationStatus=1;this.rotate(j,h)}};e.prototype.onDeviceMotion=function(i){var j=i.rotationRate.beta;var h=i.rotationRate.gamma;if(!this.desktop&&j!==null&&h!==null){this.motionStatus=1;this.rotate(j,h)}};e.prototype.onMouseMove=function(j){var i=j.clientX;var h=j.clientY;if(!this.orientationSupport&&this.relativeInput){if(this.clipRelativeInput){i=Math.max(i,this.ex);i=Math.min(i,this.ex+this.ew);h=Math.max(h,this.ey);h=Math.min(h,this.ey+this.eh)}this.ix=(i-this.ex-this.ecx)/this.erx;this.iy=(h-this.ey-this.ecy)/this.ery}else{this.ix=(i-this.wcx)/this.wrx;this.iy=(h-this.wcy)/this.wry}};c[d]=e})(window,document);